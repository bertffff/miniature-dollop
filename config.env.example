#===============================================================================
#
#          FILE: config.env.example
#
#   DESCRIPTION: Configuration template for Marzban Ultimate VPN Installer
#                Copy this file to config.env and edit values as needed
#
#         USAGE: cp config.env.example config.env && nano config.env
#
#===============================================================================

#-------------------------------------------------------------------------------
# Domain Configuration
#-------------------------------------------------------------------------------

# Your domain for the Marzban panel (Required)
# This domain must point to your server's IP address
# Example: panel.example.com, vpn.mydomain.org
DOMAIN="panel.example.com"

# Reality destination domain (for SNI camouflage)
# This is the website that will be shown during TLS handshake
# Choose a popular website that supports TLS 1.3
# Default: www.google.com
REALITY_DEST="www.google.com"

# Reality server names (comma-separated)
# SNI values that Xray will accept for Reality connections
# Default: www.google.com,google.com
REALITY_SERVER_NAMES="www.google.com,google.com"

#-------------------------------------------------------------------------------
# Admin Configuration
#-------------------------------------------------------------------------------

# Email address for SSL certificate notifications and admin contact
# Required for Let's Encrypt certificate registration
ADMIN_EMAIL="admin@example.com"

# Marzban admin panel username
# Default: admin
ADMIN_USERNAME="admin"

# Marzban admin panel password
# Leave empty to auto-generate a secure password
# Minimum 8 characters recommended
ADMIN_PASSWORD=""

#-------------------------------------------------------------------------------
# Port Configuration
#-------------------------------------------------------------------------------

# Internal Xray Reality port
# This is the port Xray listens on (behind Nginx)
# External traffic comes through port 443 via Nginx SNI routing
# Default: 8443
XRAY_PORT="8443"

# Internal Marzban dashboard port
# This is the port Marzban panel listens on (behind Nginx)
# Accessed via https://DOMAIN/dashboard
# Default: 8001
MARZBAN_PORT="8001"

#-------------------------------------------------------------------------------
# Feature Flags
#-------------------------------------------------------------------------------

# Install Cloudflare WARP for bypassing geo-restrictions
# Enables routing specific traffic (OpenAI, Netflix, etc.) through WARP
# Default: true
INSTALL_WARP="true"

# Install fake website for camouflage
# Serves a legitimate-looking website when accessed without correct SNI
# Default: true
INSTALL_FAKE_SITE="true"

# Install Fail2Ban for SSH brute-force protection
# Automatically bans IPs after failed SSH login attempts
# Default: false
INSTALL_FAIL2BAN="false"

#-------------------------------------------------------------------------------
# SSL Configuration
#-------------------------------------------------------------------------------

# Use Let's Encrypt staging environment
# Set to true for testing to avoid rate limits
# Set to false for production (real certificates)
# Default: false
USE_STAGING="false"

#-------------------------------------------------------------------------------
# Database Configuration (Advanced)
#-------------------------------------------------------------------------------

# Database type: sqlite or mariadb
# SQLite is recommended for most users (simpler, less resources)
# MariaDB is recommended for high-traffic or enterprise deployments
# Default: sqlite
# DATABASE_TYPE="sqlite"

# MariaDB settings (only if DATABASE_TYPE="mariadb")
# MARIADB_ROOT_PASSWORD=""
# MARIADB_DATABASE="marzban"
# MARIADB_USER="marzban"
# MARIADB_PASSWORD=""

#-------------------------------------------------------------------------------
# Advanced Xray Configuration
#-------------------------------------------------------------------------------

# Xray log level: none, error, warning, info, debug
# Default: warning
# XRAY_LOG_LEVEL="warning"

# Enable Xray statistics for traffic monitoring
# Default: true
# XRAY_STATS_ENABLED="true"

# Custom shortId for Reality (hex string, 8-16 chars)
# Leave empty to auto-generate
# XRAY_SHORT_ID=""

#-------------------------------------------------------------------------------
# Network Configuration
#-------------------------------------------------------------------------------

# Enable BBR congestion control
# Highly recommended for better performance
# Default: true
# ENABLE_BBR="true"

# DNS servers for the system
# Default: Uses system default or Cloudflare
# DNS_SERVERS="1.1.1.1,1.0.0.1"

#-------------------------------------------------------------------------------
# Backup Configuration
#-------------------------------------------------------------------------------

# Enable automatic daily backups
# Default: true
# AUTO_BACKUP="true"

# Backup retention days
# Default: 7
# BACKUP_RETENTION_DAYS="7"

# Backup directory
# Default: /var/backups/marzban
# BACKUP_DIR="/var/backups/marzban"

#===============================================================================
# NOTES:
#
# 1. This file contains sensitive information. Keep it secure!
#    chmod 600 config.env
#
# 2. After installation, credentials are saved to:
#    /opt/marzban/admin_credentials.txt
#
# 3. Reality keys are saved to:
#    /var/lib/marzban/reality_keys.txt
#
# 4. To regenerate configuration, delete config.env and run install.sh again
#
# 5. For troubleshooting, check:
#    - /var/log/marzban-installer.log
#    - docker logs marzban
#    - journalctl -u nginx
#
#===============================================================================
